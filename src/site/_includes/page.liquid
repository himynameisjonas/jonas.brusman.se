---
layout: layout.njk
---
<div class="flex flex-col w-content bg-white">
  <h1 class="header-block">
    {{ headline | default: title }}
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="header-icon"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z" />
    </svg>
  </h1>
  <div class="px-4 py-5 sm:p-6 markdown">
    {% if photos %}
      {% for photo in photos %}
        <div class="flex flex-col items-center">
          <div class="mb-10 max-w-screen-h">
            <img
              src="{{ photo }}"
              alt="{{ title }}"
              eleventy:widths="800,1200,2000,3000,4000"
              sizes="(max-width: 1000px) 100vw, 133vh"
              class="u-photo max-h-screen object-contain bg-white"
            >
          </div>
        </div>
      {% endfor %}
    {% endif %}

    {{ content }}

    <open-heart
      class="mx-auto my-3 block w-fit rounded px-2 py-1"
      href="https://emojis.jonas-brusman-se.pages.dev/open_heart?id={{page.url}}"
      emoji="❤️"
      >❤️</open-heart
    >
  </div>
</div>
{% unless no_footer %}
  <div class="w-content mb-2 text-gray-700 bg-salmon-200">
    <div class="px-4 py-5 sm:p-6">
      <table class="w-full">
        {% if page.date %}
          <tr>
            <th class="footer-header">{{ date_desc | default: 'Published at' }}</th>
            <td class="footer-data">
              <time class="dt-published" page.datetime="{{page.date | date: "%Y-%m-%d" }}">
                <a href="{{page.url}}" class="u-url">{{ page.date | date: '%Y-%m-%d' }}</a>
              </time>
            </td>
          </tr>
        {% endif %}

        {% if tags.length > 0 %}
          <tr>
            <th class="footer-header">Tags</th>
            <td class="footer-data">
              {% for tag in tags %}
                {% unless tag == 'blogPost' %}
                  <a href="/tags/{{tag}}/" class="prefix-hash link p-category">{{ tag }}</a>
                {% endunless %}
              {% endfor %}
            </td>
          </tr>
        {% endif %}

        {% assign similar = collections.all | similarPosts: page.inputPath, tags %}
        {% if similar.length > 0 %}
          <tr>
            <th class="footer-header">Related posts</th>
            <td class="footer-data">
              <ul class="list-disc list-inside">
                {% for similarPost in similar limit: 3 -%}
                  <li class="mb-1">
                    <a href="{{ similarPost.url }}" class="link">{{ similarPost.data.title }}</a>
                  </li>
                {% endfor %}
              </ul>
            </td>
          </tr>
        {% endif %}

        {% if syndications.length > 0 %}
          <tr>
            <th class="footer-header hidden">This post elsewhere</th>
            <td class="hidden font-light align-baseline">
              {% for url in syndications -%}
                <a href="{{ url }}" rel="syndication" class="u-syndication link">{{ url }}</a>
              {% endfor %}
            </td>
          </tr>
        {% endif %}

        <tr>
          <th class="footer-header">Have some thoughts?</th>
          <td class="footer-data">
            <a href="mailto:blog@brusman.se?subject=Re: {{title}}" class="link">Reply by email</a>
          </td>
        </tr>

        <tr class="js-tr-webmentions">
          <th class="footer-header">Reactions</th>
          <td id="webmentions" class="footer-data flex flex-col"></td>
        </tr>
      </table>

      <script src="/js/open_heart_element.js" type="module"></script>
      <script>
        window.customElements.whenDefined('open-heart').then(() => {
          for (const oh of document.querySelectorAll('open-heart')) {
            oh.getCount();
          }
        });
        window.addEventListener('open-heart', (e) => {
          e && e.target && e.target.getCount && e.target.getCount();
        });
      </script>

      <a rel="author" class="hidden p-author h-card" href="https://jonas.brusman.se">Jonas Brusman</a>
      <script
        src="/js/webmention.min.js"
        data-page-url="https://jonas.brusman.se{{page.url}}"
        data-add-urls="https://jonas.brusman.se/{{date | date: "%Y-%m-%d"}}-{{page.fileSlug}}/"
        data-comments-are-reactions="true"
        async
      ></script>
    </div>
  </div>
{% endunless %}
